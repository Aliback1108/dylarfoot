<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DYLARFOOT</title>
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='ballon.png') }}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-bg: #1B263B;
            --secondary-bg: #F5F5F5;
            --text-color: #333;
            --highlight: #D4AF37;
            --button-primary: #2E8B57;
            --button-secondary: #8B0000;
        }
        body {
            background: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('https://images.pexels.com/photos/46798/the-ball-stadion-football-the-pitch-46798.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1');
            background-size: cover;
            background-attachment: fixed;
            color: var(--text-color);
            font-family: 'Poppins', sans-serif;
            margin: 0;
            padding: 0;
            transition: background-color 0.3s, color 0.3s;
        }
        body.dark-theme {
            background: linear-gradient(rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.8)), url('https://images.pexels.com/photos/46798/the-ball-stadion-football-the-pitch-46798.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1');
            color: #F5F5F5;
        }
        body.dark-theme .form-container, body.dark-theme .match-card {
            background: #2C3E50;
            color: #F5F5F5;
        }
        body.dark-theme .form-label, body.dark-theme .predictions {
            color: #F5F5F5;
        }
        .navbar {
            background-color: var(--primary-bg);
            padding: 15px 0;
        }
        .navbar-brand {
            color: var(--highlight) !important;
            font-weight: 600;
            font-size: 1.5rem;
        }
        .navbar-nav .nav-link {
            color: #F5F5F5 !important;
            font-weight: 400;
            transition: color 0.3s;
        }
        .navbar-nav .nav-link:hover {
            color: var(--highlight) !important;
        }
        .navbar-brand img {
            transition: transform 0.3s ease;
        }
        .navbar-brand img:hover {
            transform: rotate(360deg);
        }
        .navbar-toggler .navbar-toggler-icon {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3E%3Cpath stroke='rgba(255, 255, 255, 1)' stroke-width='2' stroke-linecap='round' stroke-miterlimit='10' d='M4 7h22M4 15h22M4 23h22'/%3E%3C/svg%3E") !important;
        }
        .theme-toggle {
            color: #F5F5F5;
            font-size: 1.2rem;
            cursor: pointer;
            transition: color 0.3s;
        }
        .theme-toggle:hover {
            color: var(--highlight);
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        h1 {
            color: #fff;
            text-align: center;
            margin-bottom: 20px;
            font-size: 2.5rem;
            font-weight: 600;
            animation: fadeInDown 1s ease-in-out;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .carousel {
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            margin-bottom: 30px;
        }
        .carousel-item {
            height: 400px;
            background-size: cover;
            background-position: center;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: #fff;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
            background-color: #2c3e50;
        }
        .carousel-item h3 {
            font-size: 2rem;
            font-weight: 600;
            background: rgba(0, 0, 0, 0.5);
            padding: 10px 20px;
            border-radius: 10px;
        }
        .carousel-control-prev, .carousel-control-next {
            width: 5%;
        }
        .carousel-indicators {
            bottom: 10px;
        }
        .carousel-indicators [data-bs-target] {
            background-color: #fff;
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }
        .intro-text {
            text-align: center;
            color: #ecf0f1;
            margin-bottom: 30px;
            font-size: 1.2rem;
            font-weight: 300;
        }
        .promo-section {
            background: #fff;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            margin-bottom: 30px;
            text-align: center;
            animation: slideIn 0.8s ease-in-out;
        }
        body.dark-theme .promo-section {
            background: #2C3E50;
            color: #F5F5F5;
        }
        .promo-section h3 {
            color: var(--highlight);
            font-size: 1.5rem;
            margin-bottom: 15px;
        }
        .promo-code {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--button-primary);
            background: #f1f1f1;
            padding: 5px 10px;
            border-radius: 5px;
            display: inline-block;
            margin-bottom: 15px;
        }
        body.dark-theme .promo-code {
            background: #3A506B;
        }
        .btn-copy {
            background-color: #007bff;
            color: #fff;
            border: none;
            padding: 8px 16px;
            font-size: 0.9rem;
            font-weight: 600;
            border-radius: 5px;
            margin-right: 10px;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }
        .btn-copy:hover {
            background-color: #0056b3;
            transform: scale(1.05);
        }
        .btn-register {
            background-color: var(--button-primary);
            color: #fff;
            border: none;
            padding: 8px 16px;
            font-size: 0.9rem;
            font-weight: 600;
            border-radius: 5px;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }
        .btn-register:hover {
            background-color: #228B22;
            transform: scale(1.05);
        }
        .form-container {
            background: #fff;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            margin-bottom: 30px;
            animation: slideIn 0.8s ease-in-out;
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .form-label {
            font-weight: 600;
            color: #2c3e50;
        }
        .form-select {
            border-radius: 8px;
            padding: 10px;
            font-size: 1rem;
        }
        .select2-container--default .select2-selection--single {
            border-radius: 8px;
            border: 1px solid #ced4da;
            height: 38px;
            padding: 5px;
        }
        .select2-container--default .select2-selection--single .select2-selection__rendered {
            line-height: 28px;
        }
        .select2-container--default .select2-selection--single .select2-selection__arrow {
            height: 38px;
        }
        .error-message {
            color: #e74c3c;
            font-size: 0.9rem;
            margin-top: 10px;
            text-align: center;
        }
        .match-card {
            background: #fff;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            padding: 20px;
            animation: fadeIn 0.5s ease-in-out;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            margin-bottom: 20px;
        }
        .match-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .match-title {
            font-weight: 600;
            color: var(--highlight);
            font-size: 1.5rem;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            justify-content: center;
        }
        .team-logo {
            width: 50px;
            height: 50px;
            transition: transform 0.3s ease;
        }
        .team-logo:hover {
            transform: rotate(360deg);
        }
        .predictions {
            font-size: 1rem;
            color: #2c3e50;
        }
        .predictions span {
            display: flex;
            align-items: center;
            gap: 12px;
            margin: 10px 0;
        }
        .stats-section {
            margin-top: 20px;
            padding: 15px;
            background: #f9f9f9;
            border-radius: 10px;
        }
        body.dark-theme .stats-section {
            background: #3A506B;
        }
        .stats-section h4 {
            font-size: 1.2rem;
            color: var(--highlight);
            margin-bottom: 10px;
        }
        .stats-section p {
            margin: 5px 0;
        }
        .share-buttons {
            margin-top: 20px;
            text-align: center;
        }
        .share-buttons a {
            color: #fff;
            font-size: 1.2rem;
            margin: 0 10px;
            padding: 10px 15px;
            border-radius: 5px;
            transition: background-color 0.3s;
        }
        .share-buttons .whatsapp { background-color: #25D366; }
        .share-buttons .telegram { background-color: #0088cc; }
        .share-buttons a:hover {
            opacity: 0.8;
        }
        .vip-message {
            color: #e67e22;
            font-style: italic;
            display: flex;
            align-items: center;
            gap: 12px;
            margin: 10px 0;
        }
        .btn-primary {
            background-color: var(--button-primary);
            border: none;
            padding: 12px;
            font-size: 1rem;
            font-weight: 600;
            border-radius: 8px;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }
        .btn-primary:hover {
            background-color: #228B22;
            transform: scale(1.05);
        }
        .btn-primary:disabled {
            background-color: #95a5a6;
            cursor: not-allowed;
        }
        .btn-secondary {
            background-color: var(--button-secondary);
            border: none;
            padding: 12px;
            font-size: 1rem;
            font-weight: 600;
            border-radius: 8px;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }
        .btn-secondary:hover {
            background-color: #A52A2A;
            transform: scale(1.05);
        }
        .btn-vip {
            background-color: #D4AF37;
            color: #fff;
            border: none;
            padding: 8px 16px;
            font-size: 0.9rem;
            font-weight: 600;
            border-radius: 5px;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }
        .btn-vip:hover {
            background-color: #B8972E;
            transform: scale(1.05);
        }
        .highlight {
            color: var(--button-primary);
            font-weight: 600;
        }
        .spinner {
            display: none;
            text-align: center;
            margin: 20px 0;
        }
        .spinner i {
            font-size: 2rem;
            color: var(--highlight);
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        footer {
            background-color: var(--primary-bg);
            color: #F5F5F5;
            text-align: center;
            padding: 20px 0;
            margin-top: 40px;
        }
        footer a {
            color: var(--highlight);
            margin: 0 10px;
            font-size: 1.2rem;
            transition: color 0.3s;
        }
        footer a:hover {
            color: #F5F5F5;
        }
        /* Responsive adjustments */
        @media (max-width: 768px) {
            h1 {
                font-size: 2rem;
            }
            .carousel-item {
                height: 250px;
            }
            .carousel-item h3 {
                font-size: 1.5rem;
            }
            .form-container, .match-card, .promo-section {
                padding: 20px;
            }
            .match-title {
                font-size: 1.2rem;
            }
            .team-logo {
                width: 40px;
                height: 40px;
            }
            .predictions {
                font-size: 0.9rem;
            }
            .btn-primary, .btn-secondary, .btn-copy, .btn-register {
                font-size: 0.9rem;
                padding: 10px;
            }
        }
        @media (max-width: 576px) {
            h1 {
                font-size: 1.5rem;
            }
            .carousel-item {
                height: 200px;
            }
            .carousel-item h3 {
                font-size: 1.2rem;
            }
            .intro-text {
                font-size: 1rem;
            }
            .form-container, .match-card, .promo-section {
                padding: 15px;
            }
            .match-title {
                font-size: 1rem;
            }
            .team-logo {
                width: 30px;
                height: 30px;
            }
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg">
        <div class="container-fluid">
            <a class="navbar-brand" href="/"><img src="{{ url_for('static', filename='ballon.png') }}" alt="Ballon Logo" style="width: 30px; height: 30px; margin-right: 10px; border-radius: 50px;">DYLAR*FOOT</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="/">Accueil</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">√Ä propos</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Contact</a>
                    </li>
                </ul>
                <span class="theme-toggle" onclick="toggleTheme()">
                    <i class="fas fa-moon"></i>
                </span>
            </div>
        </div>
    </nav>

    <div class="container">
        <div id="carouselExample" class="carousel slide mb-4" data-bs-ride="carousel">
            <div class="carousel-indicators">
                <button type="button" data-bs-target="#carouselExample" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
                <button type="button" data-bs-target="#carouselExample" data-bs-slide-to="1" aria-label="Slide 2"></button>
                <button type="button" data-bs-target="#carouselExample" data-bs-slide-to="2" aria-label="Slide 3"></button>
            </div>
            <div class="carousel-inner">
                <div class="carousel-item active" style="background-image: url('https://images.pexels.com/photos/46798/the-ball-stadion-football-the-pitch-46798.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1');">
                    <h3>Pr√©disez vos matchs pr√©f√©r√©s !</h3>
                </div>
                <div class="carousel-item" style="background-image: url('https://images.pexels.com/photos/399197/soccer-stadium-football-arena-399197.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1');">
                    <h3>Analyse bas√©e sur les stats r√©centes</h3>
                </div>
                <div class="carousel-item" style="background-image: url('https://images.pexels.com/photos/47730/the-ball-stadion-football-the-pitch-47730.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1');">
                    <h3>üéâ Offre Exclusive 1xBet! Profitez d'un bonus de bienvenue avec notre code promo: <div class="promo-code" id="promoCode">ALYD1108</div>
                        <button class="btn-copy" onclick="copyPromoCode()">Copier le code</button>
                    </h3>
                </div>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>

        <div class="form-container">
            <h5 class="m-0"><i class="fa-solid fa-wand-magic-sparkles me-2"></i>G√©n√©rer une pr√©diction</h5><br>
            <form id="predictionForm" method="POST" onsubmit="showSpinner()">
                <div class="mb-3">
                    <label for="league_filter" class="form-label">Filtrer par comp√©tition (optionnel)</label>
                    <select class="form-select" id="league_filter">
                        <option value="">Toutes les comp√©titions</option>
                        {% for league in league_teams.keys() %}
                            <option value="{{ league }}">{{ league }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="mb-3">
                    <label for="home_team" class="form-label">√âquipe √† domicile</label>
                    <select class="form-select" id="home_team" name="home_team" required>
                        <option value="">Choisir une √©quipe</option>
                        {% for league, teams in league_teams.items() %}
                            <optgroup label="{{ league }}">
                                {% for team in teams %}
                                    <option value="{{ team }}" {% if team == home_team %}selected{% endif %}>{{ team }}</option>
                                {% endfor %}
                            </optgroup>
                        {% endfor %}
                    </select>
                </div>
                <div class="mb-3">
                    <label for="away_team" class="form-label">√âquipe √† l'ext√©rieur</label>
                    <select class="form-select" id="away_team" name="away_team" required>
                        <option value="">Choisir une √©quipe</option>
                        {% for league, teams in league_teams.items() %}
                            <optgroup label="{{ league }}">
                                {% for team in teams %}
                                    <option value="{{ team }}" {% if team == away_team %}selected{% endif %}>{{ team }}</option>
                                {% endfor %}
                            </optgroup>
                        {% endfor %}
                    </select>
                </div>
                {% if error %}
                    <div class="error-message">{{ error }}</div>
                {% endif %}
                <div class="d-flex gap-2">
                    <button type="submit" class="btn btn-primary w-50" id="submitBtn"><i class="fa-solid fa-robot me-2"></i>Pr√©dire</button>
                    <a href="/" class="btn btn-secondary w-50"><i class="fa-solid fa-rotate me-2"></i>R√©initialiser</a>
                </div>
            </form>
        </div>

        <div class="spinner" id="spinner">
            <i class="fas fa-spinner"></i>
        </div>

        {% if predictions %}
            <div class="match-card">
                <div class="match-title">
                    <img src="{{ home_logo }}" alt="{{ home_team }} logo" class="team-logo">
                    {{ home_team }} vs {{ away_team }}
                    <img src="{{ away_logo }}" alt="{{ away_team }} logo" class="team-logo">
                </div>
                {% if predictions == "no_data" %}
                    <div class="predictions text-danger">Pas assez de donn√©es historiques pour ce match.</div>
                {% else %}
                    <div class="predictions">
                        <span><i class="fas fa-trophy"></i> <strong>R√©sultat final (1X2):</strong> {{ predictions.result }}</span>
                        <span><i class="fas fa-balance-scale"></i> <strong>Double chance:</strong> {{ predictions.double_chance }}</span>
                        <span><i class="fas fa-futbol"></i> <strong>Nombre de buts estim√©:</strong> {{ predictions.goals }}</span>
                        {% if is_vip %}
                            <span><i class="fas fa-scoreboard"></i> <strong>Score exact pr√©dit:</strong> {{ predictions.exact_score }}</span>
                        {% else %}
                            <span class="vip-message"><i class="fas fa-lock"></i> Score exact pr√©dit : <a href="#" class="btn-vip">VIP</a></span>
                        {% endif %}
                        <span><i class="fas fa-clock"></i> <strong>Mi-temps gagnante:</strong> {{ predictions.half_winner }}</span>
                        <span><i class="fas fa-chart-line"></i> <strong>Plus/Moins de 2.5 buts:</strong> {{ predictions.over_under }}</span>
                        <span><i class="fas fa-users"></i> <strong>Les deux √©quipes marquent:</strong> {{ predictions.both_teams_score }}</span>
                    </div>
                    <div class="stats-section">
                        <h4>Statistiques des √©quipes</h4>
                        <p><strong>{{ home_team }}</strong> - Buts marqu√©s par match : {{ home_stats.goals_avg_scored }} | Buts encaiss√©s par match : {{ home_stats.goals_avg_conceded }}</p>
                        <p><strong>{{ away_team }}</strong> - Buts marqu√©s par match : {{ away_stats.goals_avg_scored }} | Buts encaiss√©s par match : {{ away_stats.goals_avg_conceded }}</p>
                    </div>
                    <div class="share-buttons">
                        <a href="#" class="whatsapp" onclick="shareOnWhatsApp()"><i class="fab fa-whatsapp"></i> W</a>
                        <a href="#" class="telegram" onclick="shareOnTelegram()"><i class="fab fa-telegram"></i> T</a>
                    </div>
                {% endif %}
            </div>
        {% endif %}
    </div>

    <footer>
        <p>¬© 2025 Pr√©dictions Foot - Tous droits r√©serv√©s</p>
        <div>
            <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
            <a href="#" aria-label="Facebook"><i class="fab fa-facebook"></i></a>
            <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
            <a href="#" aria-label="Telegram"><i class="fab fa-telegram"></i></a>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <script>
        $(document).ready(function() {
            // Initialiser Select2
            $('#home_team, #away_team, #league_filter').select2({
                placeholder: function() {
                    return $(this).attr('id') === 'league_filter' ? 'Toutes les comp√©titions' : 'Choisir une √©quipe';
                },
                allowClear: true,
                width: '100%'
            });

            // Filtrer les √©quipes par comp√©tition
            $('#league_filter').on('change', function() {
                const selectedLeague = $(this).val();
                console.log("Filtre appliqu√© pour :", selectedLeague); // D√©bogage
                $('#home_team, #away_team').each(function() {
                    const $select = $(this);
                    $select.empty(); // Vider les options existantes
                    $select.append('<option value="">Choisir une √©quipe</option>'); // Option par d√©faut
                    const allTeams = {
                        "Premier League": ["AFC Bournemouth", "Arsenal FC", "Aston Villa FC", "Brentford FC", "Brighton & Hove Albion FC", "Burnley FC", "Chelsea FC", "Crystal Palace FC", "Everton FC", "Fulham FC", "Leeds United FC", "Liverpool FC", "Manchester City FC", "Manchester United FC", "Newcastle United FC", "Nottingham Forest FC", "Sunderland AFC", "Tottenham Hotspur FC", "West Ham United FC", "Wolverhampton Wanderers FC"],
                        "Ligue 1": ["AJ Auxerre", "AS Monaco FC", "Angers SCO", "FC Lorient", "FC Metz", "FC Nantes", "Le Havre AC", "Lille OSC", "OGC Nice", "Olympique Lyonnais", "Olympique de Marseille", "Paris FC", "Paris Saint-Germain FC", "RC Strasbourg Alsace", "Racing Club de Lens", "Stade Brestois 29", "Stade Rennais FC 1901", "Toulouse FC"],
                        "Bundesliga": ["1. FC Heidenheim 1846", "1. FC K√∂ln", "1. FC Union Berlin", "1. FSV Mainz 05", "Bayer 04 Leverkusen", "Borussia Dortmund", "Borussia M√∂nchengladbach", "Eintracht Frankfurt", "FC Augsburg", "FC Bayern M√ºnchen", "FC St. Pauli 1910", "Hamburger SV", "RB Leipzig", "SC Freiburg", "SV Werder Bremen", "TSG 1899 Hoffenheim", "VfB Stuttgart", "VfL Wolfsburg"],
                        "Serie A": ["AC Milan", "AC Pisa 1909", "ACF Fiorentina", "AS Roma", "Atalanta BC", "Bologna FC 1909", "Cagliari Calcio", "Como 1907", "FC Internazionale Milano", "Genoa CFC", "Hellas Verona FC", "Juventus FC", "Parma Calcio 1913", "SS Lazio", "SSC Napoli", "Torino FC", "US Cremonese", "US Lecce", "US Sassuolo Calcio", "Udinese Calcio"],
                        "La Liga": ["Athletic Club", "CA Osasuna", "Club Atl√©tico de Madrid", "Deportivo Alav√©s", "Elche CF", "FC Barcelona", "Getafe CF", "Girona FC", "Levante UD", "RC Celta de Vigo", "RCD Espanyol de Barcelona", "RCD Mallorca", "Rayo Vallecano de Madrid", "Real Betis Balompi√©", "Real Madrid CF", "Real Oviedo", "Real Sociedad de F√∫tbol", "Sevilla FC", "Valencia CF", "Villarreal CF"],
                        "UEFA Champions League": ["AC Milan", "AC Sparta Praha", "AS Monaco FC", "Arsenal FC", "Aston Villa FC", "Atalanta BC", "BSC Young Boys", "Bayer 04 Leverkusen", "Bologna FC 1909", "Borussia Dortmund", "Celtic FC", "Club Atl√©tico de Madrid", "Club Brugge KV", "FC Barcelona", "FC Bayern M√ºnchen", "FC Internazionale Milano", "FC Red Bull Salzburg", "FK Crvena Zvezda", "FK Shakhtar Donetsk", "Feyenoord Rotterdam", "GNK Dinamo Zagreb", "Girona FC", "Juventus FC", "Lille OSC", "Liverpool FC", "Manchester City FC", "PSV", "Paris Saint-Germain FC", "RB Leipzig", "Real Madrid CF", "SK Sturm Graz", "Sport Lisboa e Benfica", "Sporting Clube de Portugal", "Stade Brestois 29", "VfB Stuttgart", "≈†K Slovan Bratislava"]
                    };
                    const teamsToShow = selectedLeague ? allTeams[selectedLeague] || [] : [].concat(...Object.values(allTeams));
                    teamsToShow.forEach(team => {
                        $select.append(`<option value="${team}">${team}</option>`);
                    });
                    console.log("Options ajout√©es :", teamsToShow); // D√©bogage
                    $select.trigger('change.select2'); // Mettre √† jour Select2
                });
            });
        });

        function toggleTheme() {
            document.body.classList.toggle('dark-theme');
            const icon = document.querySelector('.theme-toggle i');
            if (document.body.classList.contains('dark-theme')) {
                icon.classList.remove('fa-moon');
                icon.classList.add('fa-sun');
            } else {
                icon.classList.remove('fa-sun');
                icon.classList.add('fa-moon');
            }
        }

        function showSpinner() {
            const spinner = document.getElementById('spinner');
            const submitBtn = document.getElementById('submitBtn');
            spinner.style.display = 'block';
            submitBtn.disabled = true;
        }

        function copyPromoCode() {
            const promoCode = document.getElementById('promoCode').innerText;
            navigator.clipboard.writeText(promoCode).then(() => {
                alert('Code promo copi√© : ' + promoCode);
            });
        }

        const matchData = {
            home_team: "{{ home_team | safe }}",
            away_team: "{{ away_team | safe }}",
            result: "{{ predictions.result if predictions and predictions != 'no_data' else '' | safe }}"
        };

        function shareOnWhatsApp() {
            const text = `Pr√©diction pour ${matchData.home_team} vs ${matchData.away_team} : R√©sultat final : ${matchData.result}.`;
            const url = `https://api.whatsapp.com/send?text=${encodeURIComponent(text)}`;
            window.open(url, '_blank');
        }

        function shareOnTelegram() {
            const text = `Pr√©diction pour ${matchData.home_team} vs ${matchData.away_team} : R√©sultat final : ${matchData.result}.`;
            const url = `https://t.me/share/url?url=${encodeURIComponent(window.location.href)}&text=${encodeURIComponent(text)}`;
            window.open(url, '_blank');
        }
    </script>
</body>
</html>
